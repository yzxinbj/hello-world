# 堆栈相关指令

### 什么是堆栈？
堆栈是在程序做运算时用来存储中间结果的  
> 每一个应用程序（进程）都有一个独立的4GB的内存空间  
> 但并不是4GB就一定是进程来用了，你要用需要申请  
> 本质就是一块内存，是操作系统在程序启动的时候已经分配好的，供程序执行时使用
> 堆栈就是程序的心脏，大部分重要数据都在堆栈中经过  

### FS段寄存器
```
FS存储的是存储`堆栈的内存地址`的内存地址  
解释：FS：0x00ff1234(地址)-->0x00ff1234+0x4：0x0019ff11(top of thread's stack)-->0x0019ff11(堆栈顶内存地址)
                           0x00ff1234+0x8：0x0018ff11(bottom of thread's stack)-->0x0018ff11(栈底)
```

### ESP栈指针寄存器
> 指向当前程序正在使用堆栈的内存地址    
> 即当前程序使用堆栈使用到那里了  
> 指向栈顶

### 堆栈的使用push
本质
> 1.将堆栈中压入数据，那么压入堆栈的哪呢？根据ESP    
> 2.修改栈顶指针ESP寄存器
注意：操作数不能是8位寄存器   
push imm8/imm16/imm32  
push r16/r32   
push m16/m32  

### pop
本质 pop 容器
> 1.将栈顶的数据放到目标处
> 2.修改栈顶指针ESP寄存器
pop r16/r32
pop m16/m32

# 小结
使用内存push，释放内存pop  
本质都是内存的操作，同时修改了栈指针寄存器ESP  


